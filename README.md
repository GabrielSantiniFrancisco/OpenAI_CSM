# OpenAI Chat Session Manager

A professional, modular Python library for managing conversational sessions with the OpenAI Chat API, featuring robust environment configuration, structured logging, and flexible context initialization.

---

## Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Architecture](#architecture)
- [Installation](#installation)
- [Configuration](#configuration)
- [Usage](#usage)
- [Modules](#modules)
- [License](#license)
- [Contact](#contact)

---

## Overview

This repository provides a set of Python modules designed to streamline the process of interacting with the OpenAI Chat API. It includes:

- **Session management** with message history
- **Environment configuration** via external files
- **Custom, structured logging** for both development and production environments

---

## Features

- **OpenAI Chat Integration:** Seamlessly send and receive messages using the OpenAI Chat API.
- **Contextual Conversations:** Initialize chat sessions with custom context from external files.
- **Environment Management:** Centralized configuration for API keys, endpoints, and other settings.
- **Custom Logging:** Flexible, detailed logging to both file and console.
- **Interactive CLI:** Out-of-the-box command-line chat interface.

---

## Architecture

```
.
├── CallOpenAi.py         # Main chat session class and CLI
├── EnvManager.py         # Environment/configuration manager
├── CustomLogger.py       # Structured, configurable logger
├── conf/                 # Configuration files (e.g., CallOpenAi.cfg)
├── log/                  # Log files generated by the application
├── misc/
│   └── Dockerfile        # Dockerfile for containerized deployment
```

---

## Installation

1. **Clone the repository:**
   ```bash
   git clone [<repo-url>](https://github.com/GabrielSantiniFrancisco/OpenAI_CSM.git)
   cd OpenAI_CSM
   ```

2. **Install dependencies:**
   ```bash
   pip install requests
   ```

3. **Configure your environment:**  
   Place your configuration file (e.g., `CallOpenAi.cfg`) in the `conf/` directory as described below.

---

## Configuration

Create a configuration file (e.g., `conf/CallOpenAi.cfg`) with the following variables:

```python
OPENAI_MODEL = "gpt-4"
OPENAI_API_KEY = "your-openai-api-key"
CHAT_URL = "https://api.openai.com/v1/chat/completions"
cert_path = "/path/to/your/certificate.pem"
logging_config = {
    "level": "INFO",
    "log_to_file": True,
    "log_file_path": "./log/chat_session.log",
    "log_to_console": True,
    "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    "date_format": "%Y-%m-%d %H:%M:%S"
}
```

---

## Usage

### As a Library

```python
from CallOpenAi import OpenAIChatSession
from EnvManager import EnvManager
from CustomLogger import CustomLogger

env = EnvManager('conf/CallOpenAi.cfg')
logger = CustomLogger(config=env.config.get('logging_config', {}), logger_name='CallOpenAi')
chat = OpenAIChatSession(env, logger, context_file_path='context.txt')

reply = chat.send("Hello, how are you?")
print("ChatGPT:", reply)
```

### As a CLI Tool

```bash
python CallOpenAi.py [optional_context_file.txt]
```

Type your message and receive responses interactively. Type `exit` to end the session.

---

## Modules

### `CallOpenAi.py`
- Defines `OpenAIChatSession` for managing chat sessions and message history.
- Handles context initialization, API requests, and interactive CLI.

### `EnvManager.py`
- Loads configuration from Python files.
- Sets environment variables and provides access to config values.

### `CustomLogger.py`
- Provides a flexible logger with file and console output.
- Supports configurable log levels and formats.

### `misc/Dockerfile`
- Dockerfile for building a containerized environment for the application.

---

## License

This project is licensed under the [MIT License](LICENSE).

---

## Contact

**Author:** Gabriel Santini Francisco  
**Email:** gabrielsantinifrancisco@outlook.com

---
